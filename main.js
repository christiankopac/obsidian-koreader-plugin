/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var oi=Object.create;var ne=Object.defineProperty;var si=Object.getOwnPropertyDescriptor;var ai=Object.getOwnPropertyNames;var ui=Object.getPrototypeOf,ci=Object.prototype.hasOwnProperty;var g=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports),li=(e,n)=>{for(var r in n)ne(e,r,{get:n[r],enumerable:!0})},De=(e,n,r,t)=>{if(n&&typeof n=="object"||typeof n=="function")for(let i of ai(n))!ci.call(e,i)&&i!==r&&ne(e,i,{get:()=>n[i],enumerable:!(t=si(n,i))||t.enumerable});return e};var ie=(e,n,r)=>(r=e!=null?oi(ui(e)):{},De(n||!e||!e.__esModule?ne(r,"default",{value:e,enumerable:!0}):r,e)),pi=e=>De(ne({},"__esModule",{value:!0}),e);var G=g((_s,je)=>{var fi=Object.prototype.toString;je.exports=function(n){if(n===void 0)return"undefined";if(n===null)return"null";var r=typeof n;if(r==="boolean")return"boolean";if(r==="string")return"string";if(r==="number")return"number";if(r==="symbol")return"symbol";if(r==="function")return xi(n)?"generatorfunction":"function";if(hi(n))return"array";if(vi(n))return"buffer";if(Ai(n))return"arguments";if(gi(n))return"date";if(di(n))return"error";if(mi(n))return"regexp";switch(Pe(n)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(yi(n))return"generator";switch(r=fi.call(n),r){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return r.slice(8,-1).toLowerCase().replace(/\s/g,"")};function Pe(e){return typeof e.constructor=="function"?e.constructor.name:null}function hi(e){return Array.isArray?Array.isArray(e):e instanceof Array}function di(e){return e instanceof Error||typeof e.message=="string"&&e.constructor&&typeof e.constructor.stackTraceLimit=="number"}function gi(e){return e instanceof Date?!0:typeof e.toDateString=="function"&&typeof e.getDate=="function"&&typeof e.setDate=="function"}function mi(e){return e instanceof RegExp?!0:typeof e.flags=="string"&&typeof e.ignoreCase=="boolean"&&typeof e.multiline=="boolean"&&typeof e.global=="boolean"}function xi(e,n){return Pe(e)==="GeneratorFunction"}function yi(e){return typeof e.throw=="function"&&typeof e.return=="function"&&typeof e.next=="function"}function Ai(e){try{if(typeof e.length=="number"&&typeof e.callee=="function")return!0}catch(n){if(n.message.indexOf("callee")!==-1)return!0}return!1}function vi(e){return e.constructor&&typeof e.constructor.isBuffer=="function"?e.constructor.isBuffer(e):!1}});var Ke=g((Os,He)=>{"use strict";He.exports=function(n){return typeof n!="undefined"&&n!==null&&(typeof n=="object"||typeof n=="function")}});var $e=g((Ts,Ue)=>{"use strict";var Ye=Ke();Ue.exports=function(n){Ye(n)||(n={});for(var r=arguments.length,t=1;t<r;t++){var i=arguments[t];Ye(i)&&wi(n,i)}return n};function wi(e,n){for(var r in n)bi(n,r)&&(e[r]=n[r])}function bi(e,n){return Object.prototype.hasOwnProperty.call(e,n)}});var Ge=g((Is,Ve)=>{"use strict";var ki=G(),Ci=$e();Ve.exports=function(e,n){typeof n=="function"&&(n={parse:n});var r=Si(e),t={section_delimiter:"---",parse:_i},i=Ci({},t,n),o=i.section_delimiter,s=r.content.split(/\r?\n/),a=null,u=We(),c=[],f=[];function p(xe){r.content=xe,a=[],c=[]}function l(xe){f.length&&(u.key=Ei(f[0],o),u.content=xe,i.parse(u,a),a.push(u),u=We(),c=[],f=[])}for(var h=0;h<s.length;h++){var m=s[h],A=f.length,x=m.trim();if(Fi(x,o)){if(x.length===3&&h!==0){if(A===0||A===2){c.push(m);continue}f.push(x),u.data=c.join(`
`),c=[];continue}a===null&&p(c.join(`
`)),A===2&&l(c.join(`
`)),f.push(x);continue}c.push(m)}return a===null?p(c.join(`
`)):l(c.join(`
`)),r.sections=a,r};function Fi(e,n){return!(e.slice(0,n.length)!==n||e.charAt(n.length+1)===n.slice(-1))}function Si(e){if(ki(e)!=="object"&&(e={content:e}),typeof e.content!="string"&&!Oi(e.content))throw new TypeError("expected a buffer or string");return e.content=e.content.toString(),e.sections=[],e}function Ei(e,n){return e?e.slice(n.length).trim():""}function We(){return{key:"",data:"",content:""}}function _i(e){return e}function Oi(e){return e&&e.constructor&&typeof e.constructor.isBuffer=="function"?e.constructor.isBuffer(e):!1}});var N=g((Ns,I)=>{"use strict";function Je(e){return typeof e=="undefined"||e===null}function Ti(e){return typeof e=="object"&&e!==null}function Ii(e){return Array.isArray(e)?e:Je(e)?[]:[e]}function Ni(e,n){var r,t,i,o;if(n)for(o=Object.keys(n),r=0,t=o.length;r<t;r+=1)i=o[r],e[i]=n[i];return e}function Li(e,n){var r="",t;for(t=0;t<n;t+=1)r+=e;return r}function Ri(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}I.exports.isNothing=Je;I.exports.isObject=Ti;I.exports.toArray=Ii;I.exports.repeat=Li;I.exports.isNegativeZero=Ri;I.exports.extend=Ni});var D=g((Ls,Qe)=>{"use strict";function J(e,n){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=n,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}J.prototype=Object.create(Error.prototype);J.prototype.constructor=J;J.prototype.toString=function(n){var r=this.name+": ";return r+=this.reason||"(unknown reason)",!n&&this.mark&&(r+=" "+this.mark.toString()),r};Qe.exports=J});var ze=g((Rs,Ze)=>{"use strict";var Xe=N();function ye(e,n,r,t,i){this.name=e,this.buffer=n,this.position=r,this.line=t,this.column=i}ye.prototype.getSnippet=function(n,r){var t,i,o,s,a;if(!this.buffer)return null;for(n=n||4,r=r||75,t="",i=this.position;i>0&&`\0\r
\x85\u2028\u2029`.indexOf(this.buffer.charAt(i-1))===-1;)if(i-=1,this.position-i>r/2-1){t=" ... ",i+=5;break}for(o="",s=this.position;s<this.buffer.length&&`\0\r
\x85\u2028\u2029`.indexOf(this.buffer.charAt(s))===-1;)if(s+=1,s-this.position>r/2-1){o=" ... ",s-=5;break}return a=this.buffer.slice(i,s),Xe.repeat(" ",n)+t+a+o+`
`+Xe.repeat(" ",n+this.position-i+t.length)+"^"};ye.prototype.toString=function(n){var r,t="";return this.name&&(t+='in "'+this.name+'" '),t+="at line "+(this.line+1)+", column "+(this.column+1),n||(r=this.getSnippet(),r&&(t+=`:
`+r)),t};Ze.exports=ye});var b=g((Bs,rr)=>{"use strict";var er=D(),Bi=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],qi=["scalar","sequence","mapping"];function Mi(e){var n={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(t){n[String(t)]=r})}),n}function Di(e,n){if(n=n||{},Object.keys(n).forEach(function(r){if(Bi.indexOf(r)===-1)throw new er('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.tag=e,this.kind=n.kind||null,this.resolve=n.resolve||function(){return!0},this.construct=n.construct||function(r){return r},this.instanceOf=n.instanceOf||null,this.predicate=n.predicate||null,this.represent=n.represent||null,this.defaultStyle=n.defaultStyle||null,this.styleAliases=Mi(n.styleAliases||null),qi.indexOf(this.kind)===-1)throw new er('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}rr.exports=Di});var L=g((qs,ir)=>{"use strict";var nr=N(),te=D(),Pi=b();function Ae(e,n,r){var t=[];return e.include.forEach(function(i){r=Ae(i,n,r)}),e[n].forEach(function(i){r.forEach(function(o,s){o.tag===i.tag&&o.kind===i.kind&&t.push(s)}),r.push(i)}),r.filter(function(i,o){return t.indexOf(o)===-1})}function ji(){var e={scalar:{},sequence:{},mapping:{},fallback:{}},n,r;function t(i){e[i.kind][i.tag]=e.fallback[i.tag]=i}for(n=0,r=arguments.length;n<r;n+=1)arguments[n].forEach(t);return e}function P(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach(function(n){if(n.loadKind&&n.loadKind!=="scalar")throw new te("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=Ae(this,"implicit",[]),this.compiledExplicit=Ae(this,"explicit",[]),this.compiledTypeMap=ji(this.compiledImplicit,this.compiledExplicit)}P.DEFAULT=null;P.create=function(){var n,r;switch(arguments.length){case 1:n=P.DEFAULT,r=arguments[0];break;case 2:n=arguments[0],r=arguments[1];break;default:throw new te("Wrong number of arguments for Schema.create function")}if(n=nr.toArray(n),r=nr.toArray(r),!n.every(function(t){return t instanceof P}))throw new te("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!r.every(function(t){return t instanceof Pi}))throw new te("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new P({include:n,explicit:r})};ir.exports=P});var or=g((Ms,tr)=>{"use strict";var Hi=b();tr.exports=new Hi("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}})});var ar=g((Ds,sr)=>{"use strict";var Ki=b();sr.exports=new Ki("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}})});var cr=g((Ps,ur)=>{"use strict";var Yi=b();ur.exports=new Yi("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}})});var oe=g((js,lr)=>{"use strict";var Ui=L();lr.exports=new Ui({explicit:[or(),ar(),cr()]})});var fr=g((Hs,pr)=>{"use strict";var $i=b();function Wi(e){if(e===null)return!0;var n=e.length;return n===1&&e==="~"||n===4&&(e==="null"||e==="Null"||e==="NULL")}function Vi(){return null}function Gi(e){return e===null}pr.exports=new $i("tag:yaml.org,2002:null",{kind:"scalar",resolve:Wi,construct:Vi,predicate:Gi,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})});var dr=g((Ks,hr)=>{"use strict";var Ji=b();function Qi(e){if(e===null)return!1;var n=e.length;return n===4&&(e==="true"||e==="True"||e==="TRUE")||n===5&&(e==="false"||e==="False"||e==="FALSE")}function Xi(e){return e==="true"||e==="True"||e==="TRUE"}function Zi(e){return Object.prototype.toString.call(e)==="[object Boolean]"}hr.exports=new Ji("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Qi,construct:Xi,predicate:Zi,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"})});var mr=g((Ys,gr)=>{"use strict";var zi=N(),et=b();function rt(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function nt(e){return 48<=e&&e<=55}function it(e){return 48<=e&&e<=57}function tt(e){if(e===null)return!1;var n=e.length,r=0,t=!1,i;if(!n)return!1;if(i=e[r],(i==="-"||i==="+")&&(i=e[++r]),i==="0"){if(r+1===n)return!0;if(i=e[++r],i==="b"){for(r++;r<n;r++)if(i=e[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;t=!0}return t&&i!=="_"}if(i==="x"){for(r++;r<n;r++)if(i=e[r],i!=="_"){if(!rt(e.charCodeAt(r)))return!1;t=!0}return t&&i!=="_"}for(;r<n;r++)if(i=e[r],i!=="_"){if(!nt(e.charCodeAt(r)))return!1;t=!0}return t&&i!=="_"}if(i==="_")return!1;for(;r<n;r++)if(i=e[r],i!=="_"){if(i===":")break;if(!it(e.charCodeAt(r)))return!1;t=!0}return!t||i==="_"?!1:i!==":"?!0:/^(:[0-5]?[0-9])+$/.test(e.slice(r))}function ot(e){var n=e,r=1,t,i,o=[];return n.indexOf("_")!==-1&&(n=n.replace(/_/g,"")),t=n[0],(t==="-"||t==="+")&&(t==="-"&&(r=-1),n=n.slice(1),t=n[0]),n==="0"?0:t==="0"?n[1]==="b"?r*parseInt(n.slice(2),2):n[1]==="x"?r*parseInt(n,16):r*parseInt(n,8):n.indexOf(":")!==-1?(n.split(":").forEach(function(s){o.unshift(parseInt(s,10))}),n=0,i=1,o.forEach(function(s){n+=s*i,i*=60}),r*n):r*parseInt(n,10)}function st(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!zi.isNegativeZero(e)}gr.exports=new et("tag:yaml.org,2002:int",{kind:"scalar",resolve:tt,construct:ot,predicate:st,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0"+e.toString(8):"-0"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})});var Ar=g((Us,yr)=>{"use strict";var xr=N(),at=b(),ut=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function ct(e){return!(e===null||!ut.test(e)||e[e.length-1]==="_")}function lt(e){var n,r,t,i;return n=e.replace(/_/g,"").toLowerCase(),r=n[0]==="-"?-1:1,i=[],"+-".indexOf(n[0])>=0&&(n=n.slice(1)),n===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:n===".nan"?NaN:n.indexOf(":")>=0?(n.split(":").forEach(function(o){i.unshift(parseFloat(o,10))}),n=0,t=1,i.forEach(function(o){n+=o*t,t*=60}),r*n):r*parseFloat(n,10)}var pt=/^[-+]?[0-9]+e/;function ft(e,n){var r;if(isNaN(e))switch(n){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(n){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(n){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(xr.isNegativeZero(e))return"-0.0";return r=e.toString(10),pt.test(r)?r.replace("e",".e"):r}function ht(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||xr.isNegativeZero(e))}yr.exports=new at("tag:yaml.org,2002:float",{kind:"scalar",resolve:ct,construct:lt,predicate:ht,represent:ft,defaultStyle:"lowercase"})});var ve=g(($s,vr)=>{"use strict";var dt=L();vr.exports=new dt({include:[oe()],implicit:[fr(),dr(),mr(),Ar()]})});var we=g((Ws,wr)=>{"use strict";var gt=L();wr.exports=new gt({include:[ve()]})});var Fr=g((Vs,Cr)=>{"use strict";var mt=b(),br=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),kr=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function xt(e){return e===null?!1:br.exec(e)!==null||kr.exec(e)!==null}function yt(e){var n,r,t,i,o,s,a,u=0,c=null,f,p,l;if(n=br.exec(e),n===null&&(n=kr.exec(e)),n===null)throw new Error("Date resolve error");if(r=+n[1],t=+n[2]-1,i=+n[3],!n[4])return new Date(Date.UTC(r,t,i));if(o=+n[4],s=+n[5],a=+n[6],n[7]){for(u=n[7].slice(0,3);u.length<3;)u+="0";u=+u}return n[9]&&(f=+n[10],p=+(n[11]||0),c=(f*60+p)*6e4,n[9]==="-"&&(c=-c)),l=new Date(Date.UTC(r,t,i,o,s,a,u)),c&&l.setTime(l.getTime()-c),l}function At(e){return e.toISOString()}Cr.exports=new mt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:xt,construct:yt,instanceOf:Date,represent:At})});var Er=g((Gs,Sr)=>{"use strict";var vt=b();function wt(e){return e==="<<"||e===null}Sr.exports=new vt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:wt})});var Tr=g((Js,Or)=>{"use strict";var R;try{_r=require,R=_r("buffer").Buffer}catch(e){}var _r,bt=b(),be=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function kt(e){if(e===null)return!1;var n,r,t=0,i=e.length,o=be;for(r=0;r<i;r++)if(n=o.indexOf(e.charAt(r)),!(n>64)){if(n<0)return!1;t+=6}return t%8===0}function Ct(e){var n,r,t=e.replace(/[\r\n=]/g,""),i=t.length,o=be,s=0,a=[];for(n=0;n<i;n++)n%4===0&&n&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|o.indexOf(t.charAt(n));return r=i%4*6,r===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):r===18?(a.push(s>>10&255),a.push(s>>2&255)):r===12&&a.push(s>>4&255),R?R.from?R.from(a):new R(a):a}function Ft(e){var n="",r=0,t,i,o=e.length,s=be;for(t=0;t<o;t++)t%3===0&&t&&(n+=s[r>>18&63],n+=s[r>>12&63],n+=s[r>>6&63],n+=s[r&63]),r=(r<<8)+e[t];return i=o%3,i===0?(n+=s[r>>18&63],n+=s[r>>12&63],n+=s[r>>6&63],n+=s[r&63]):i===2?(n+=s[r>>10&63],n+=s[r>>4&63],n+=s[r<<2&63],n+=s[64]):i===1&&(n+=s[r>>2&63],n+=s[r<<4&63],n+=s[64],n+=s[64]),n}function St(e){return R&&R.isBuffer(e)}Or.exports=new bt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:kt,construct:Ct,predicate:St,represent:Ft})});var Nr=g((Qs,Ir)=>{"use strict";var Et=b(),_t=Object.prototype.hasOwnProperty,Ot=Object.prototype.toString;function Tt(e){if(e===null)return!0;var n=[],r,t,i,o,s,a=e;for(r=0,t=a.length;r<t;r+=1){if(i=a[r],s=!1,Ot.call(i)!=="[object Object]")return!1;for(o in i)if(_t.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(n.indexOf(o)===-1)n.push(o);else return!1}return!0}function It(e){return e!==null?e:[]}Ir.exports=new Et("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Tt,construct:It})});var Rr=g((Xs,Lr)=>{"use strict";var Nt=b(),Lt=Object.prototype.toString;function Rt(e){if(e===null)return!0;var n,r,t,i,o,s=e;for(o=new Array(s.length),n=0,r=s.length;n<r;n+=1){if(t=s[n],Lt.call(t)!=="[object Object]"||(i=Object.keys(t),i.length!==1))return!1;o[n]=[i[0],t[i[0]]]}return!0}function Bt(e){if(e===null)return[];var n,r,t,i,o,s=e;for(o=new Array(s.length),n=0,r=s.length;n<r;n+=1)t=s[n],i=Object.keys(t),o[n]=[i[0],t[i[0]]];return o}Lr.exports=new Nt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Rt,construct:Bt})});var qr=g((Zs,Br)=>{"use strict";var qt=b(),Mt=Object.prototype.hasOwnProperty;function Dt(e){if(e===null)return!0;var n,r=e;for(n in r)if(Mt.call(r,n)&&r[n]!==null)return!1;return!0}function Pt(e){return e!==null?e:{}}Br.exports=new qt("tag:yaml.org,2002:set",{kind:"mapping",resolve:Dt,construct:Pt})});var j=g((zs,Mr)=>{"use strict";var jt=L();Mr.exports=new jt({include:[we()],implicit:[Fr(),Er()],explicit:[Tr(),Nr(),Rr(),qr()]})});var Pr=g((ea,Dr)=>{"use strict";var Ht=b();function Kt(){return!0}function Yt(){}function Ut(){return""}function $t(e){return typeof e=="undefined"}Dr.exports=new Ht("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:Kt,construct:Yt,predicate:$t,represent:Ut})});var Hr=g((ra,jr)=>{"use strict";var Wt=b();function Vt(e){if(e===null||e.length===0)return!1;var n=e,r=/\/([gim]*)$/.exec(e),t="";return!(n[0]==="/"&&(r&&(t=r[1]),t.length>3||n[n.length-t.length-1]!=="/"))}function Gt(e){var n=e,r=/\/([gim]*)$/.exec(e),t="";return n[0]==="/"&&(r&&(t=r[1]),n=n.slice(1,n.length-t.length-1)),new RegExp(n,t)}function Jt(e){var n="/"+e.source+"/";return e.global&&(n+="g"),e.multiline&&(n+="m"),e.ignoreCase&&(n+="i"),n}function Qt(e){return Object.prototype.toString.call(e)==="[object RegExp]"}jr.exports=new Wt("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:Vt,construct:Gt,predicate:Qt,represent:Jt})});var Ur=g((na,Yr)=>{"use strict";var se;try{Kr=require,se=Kr("esprima")}catch(e){typeof window!="undefined"&&(se=window.esprima)}var Kr,Xt=b();function Zt(e){if(e===null)return!1;try{var n="("+e+")",r=se.parse(n,{range:!0});return!(r.type!=="Program"||r.body.length!==1||r.body[0].type!=="ExpressionStatement"||r.body[0].expression.type!=="ArrowFunctionExpression"&&r.body[0].expression.type!=="FunctionExpression")}catch(t){return!1}}function zt(e){var n="("+e+")",r=se.parse(n,{range:!0}),t=[],i;if(r.type!=="Program"||r.body.length!==1||r.body[0].type!=="ExpressionStatement"||r.body[0].expression.type!=="ArrowFunctionExpression"&&r.body[0].expression.type!=="FunctionExpression")throw new Error("Failed to resolve function");return r.body[0].expression.params.forEach(function(o){t.push(o.name)}),i=r.body[0].expression.body.range,r.body[0].expression.body.type==="BlockStatement"?new Function(t,n.slice(i[0]+1,i[1]-1)):new Function(t,"return "+n.slice(i[0],i[1]))}function eo(e){return e.toString()}function ro(e){return Object.prototype.toString.call(e)==="[object Function]"}Yr.exports=new Xt("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:Zt,construct:zt,predicate:ro,represent:eo})});var Q=g((ia,Wr)=>{"use strict";var $r=L();Wr.exports=$r.DEFAULT=new $r({include:[j()],explicit:[Pr(),Hr(),Ur()]})});var fn=g((ta,X)=>{"use strict";var E=N(),zr=D(),no=ze(),en=j(),io=Q(),T=Object.prototype.hasOwnProperty,ae=1,rn=2,nn=3,ue=4,ke=1,to=2,Vr=3,oo=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,so=/[\x85\u2028\u2029]/,ao=/[,\[\]\{\}]/,tn=/^(?:!|!!|![a-z\-]+!)$/i,on=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Gr(e){return Object.prototype.toString.call(e)}function S(e){return e===10||e===13}function q(e){return e===9||e===32}function F(e){return e===9||e===32||e===10||e===13}function H(e){return e===44||e===91||e===93||e===123||e===125}function uo(e){var n;return 48<=e&&e<=57?e-48:(n=e|32,97<=n&&n<=102?n-97+10:-1)}function co(e){return e===120?2:e===117?4:e===85?8:0}function lo(e){return 48<=e&&e<=57?e-48:-1}function Jr(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function po(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var sn=new Array(256),an=new Array(256);for(B=0;B<256;B++)sn[B]=Jr(B)?1:0,an[B]=Jr(B);var B;function fo(e,n){this.input=e,this.filename=n.filename||null,this.schema=n.schema||io,this.onWarning=n.onWarning||null,this.legacy=n.legacy||!1,this.json=n.json||!1,this.listener=n.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function un(e,n){return new zr(n,new no(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function d(e,n){throw un(e,n)}function ce(e,n){e.onWarning&&e.onWarning.call(null,un(e,n))}var Qr={YAML:function(n,r,t){var i,o,s;n.version!==null&&d(n,"duplication of %YAML directive"),t.length!==1&&d(n,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(t[0]),i===null&&d(n,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&d(n,"unacceptable YAML version of the document"),n.version=t[0],n.checkLineBreaks=s<2,s!==1&&s!==2&&ce(n,"unsupported YAML version of the document")},TAG:function(n,r,t){var i,o;t.length!==2&&d(n,"TAG directive accepts exactly two arguments"),i=t[0],o=t[1],tn.test(i)||d(n,"ill-formed tag handle (first argument) of the TAG directive"),T.call(n.tagMap,i)&&d(n,'there is a previously declared suffix for "'+i+'" tag handle'),on.test(o)||d(n,"ill-formed tag prefix (second argument) of the TAG directive"),n.tagMap[i]=o}};function O(e,n,r,t){var i,o,s,a;if(n<r){if(a=e.input.slice(n,r),t)for(i=0,o=a.length;i<o;i+=1)s=a.charCodeAt(i),s===9||32<=s&&s<=1114111||d(e,"expected valid JSON character");else oo.test(a)&&d(e,"the stream contains non-printable characters");e.result+=a}}function Xr(e,n,r,t){var i,o,s,a;for(E.isObject(r)||d(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,a=i.length;s<a;s+=1)o=i[s],T.call(n,o)||(n[o]=r[o],t[o]=!0)}function K(e,n,r,t,i,o,s,a){var u,c;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,c=i.length;u<c;u+=1)Array.isArray(i[u])&&d(e,"nested arrays are not supported inside keys"),typeof i=="object"&&Gr(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&Gr(i)==="[object Object]"&&(i="[object Object]"),i=String(i),n===null&&(n={}),t==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,c=o.length;u<c;u+=1)Xr(e,n,o[u],r);else Xr(e,n,o,r);else!e.json&&!T.call(r,i)&&T.call(n,i)&&(e.line=s||e.line,e.position=a||e.position,d(e,"duplicated mapping key")),n[i]=o,delete r[i];return n}function Ce(e){var n;n=e.input.charCodeAt(e.position),n===10?e.position++:n===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):d(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function w(e,n,r){for(var t=0,i=e.input.charCodeAt(e.position);i!==0;){for(;q(i);)i=e.input.charCodeAt(++e.position);if(n&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(S(i))for(Ce(e),i=e.input.charCodeAt(e.position),t++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return r!==-1&&t!==0&&e.lineIndent<r&&ce(e,"deficient indentation"),t}function le(e){var n=e.position,r;return r=e.input.charCodeAt(n),!!((r===45||r===46)&&r===e.input.charCodeAt(n+1)&&r===e.input.charCodeAt(n+2)&&(n+=3,r=e.input.charCodeAt(n),r===0||F(r)))}function Fe(e,n){n===1?e.result+=" ":n>1&&(e.result+=E.repeat(`
`,n-1))}function ho(e,n,r){var t,i,o,s,a,u,c,f,p=e.kind,l=e.result,h;if(h=e.input.charCodeAt(e.position),F(h)||H(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(i=e.input.charCodeAt(e.position+1),F(i)||r&&H(i)))return!1;for(e.kind="scalar",e.result="",o=s=e.position,a=!1;h!==0;){if(h===58){if(i=e.input.charCodeAt(e.position+1),F(i)||r&&H(i))break}else if(h===35){if(t=e.input.charCodeAt(e.position-1),F(t))break}else{if(e.position===e.lineStart&&le(e)||r&&H(h))break;if(S(h))if(u=e.line,c=e.lineStart,f=e.lineIndent,w(e,!1,-1),e.lineIndent>=n){a=!0,h=e.input.charCodeAt(e.position);continue}else{e.position=s,e.line=u,e.lineStart=c,e.lineIndent=f;break}}a&&(O(e,o,s,!1),Fe(e,e.line-u),o=s=e.position,a=!1),q(h)||(s=e.position+1),h=e.input.charCodeAt(++e.position)}return O(e,o,s,!1),e.result?!0:(e.kind=p,e.result=l,!1)}function go(e,n){var r,t,i;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,t=i=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(O(e,t,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)t=e.position,e.position++,i=e.position;else return!0;else S(r)?(O(e,t,i,!0),Fe(e,w(e,!1,n)),t=i=e.position):e.position===e.lineStart&&le(e)?d(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);d(e,"unexpected end of the stream within a single quoted scalar")}function mo(e,n){var r,t,i,o,s,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=t=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return O(e,r,e.position,!0),e.position++,!0;if(a===92){if(O(e,r,e.position,!0),a=e.input.charCodeAt(++e.position),S(a))w(e,!1,n);else if(a<256&&sn[a])e.result+=an[a],e.position++;else if((s=co(a))>0){for(i=s,o=0;i>0;i--)a=e.input.charCodeAt(++e.position),(s=uo(a))>=0?o=(o<<4)+s:d(e,"expected hexadecimal character");e.result+=po(o),e.position++}else d(e,"unknown escape sequence");r=t=e.position}else S(a)?(O(e,r,t,!0),Fe(e,w(e,!1,n)),r=t=e.position):e.position===e.lineStart&&le(e)?d(e,"unexpected end of the document within a double quoted scalar"):(e.position++,t=e.position)}d(e,"unexpected end of the stream within a double quoted scalar")}function xo(e,n){var r=!0,t,i=e.tag,o,s=e.anchor,a,u,c,f,p,l={},h,m,A,x;if(x=e.input.charCodeAt(e.position),x===91)u=93,p=!1,o=[];else if(x===123)u=125,p=!0,o={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),x=e.input.charCodeAt(++e.position);x!==0;){if(w(e,!0,n),x=e.input.charCodeAt(e.position),x===u)return e.position++,e.tag=i,e.anchor=s,e.kind=p?"mapping":"sequence",e.result=o,!0;r||d(e,"missed comma between flow collection entries"),m=h=A=null,c=f=!1,x===63&&(a=e.input.charCodeAt(e.position+1),F(a)&&(c=f=!0,e.position++,w(e,!0,n))),t=e.line,Y(e,n,ae,!1,!0),m=e.tag,h=e.result,w(e,!0,n),x=e.input.charCodeAt(e.position),(f||e.line===t)&&x===58&&(c=!0,x=e.input.charCodeAt(++e.position),w(e,!0,n),Y(e,n,ae,!1,!0),A=e.result),p?K(e,o,l,m,h,A):c?o.push(K(e,null,l,m,h,A)):o.push(h),w(e,!0,n),x=e.input.charCodeAt(e.position),x===44?(r=!0,x=e.input.charCodeAt(++e.position)):r=!1}d(e,"unexpected end of the stream within a flow collection")}function yo(e,n){var r,t,i=ke,o=!1,s=!1,a=n,u=0,c=!1,f,p;if(p=e.input.charCodeAt(e.position),p===124)t=!1;else if(p===62)t=!0;else return!1;for(e.kind="scalar",e.result="";p!==0;)if(p=e.input.charCodeAt(++e.position),p===43||p===45)ke===i?i=p===43?Vr:to:d(e,"repeat of a chomping mode identifier");else if((f=lo(p))>=0)f===0?d(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?d(e,"repeat of an indentation width identifier"):(a=n+f-1,s=!0);else break;if(q(p)){do p=e.input.charCodeAt(++e.position);while(q(p));if(p===35)do p=e.input.charCodeAt(++e.position);while(!S(p)&&p!==0)}for(;p!==0;){for(Ce(e),e.lineIndent=0,p=e.input.charCodeAt(e.position);(!s||e.lineIndent<a)&&p===32;)e.lineIndent++,p=e.input.charCodeAt(++e.position);if(!s&&e.lineIndent>a&&(a=e.lineIndent),S(p)){u++;continue}if(e.lineIndent<a){i===Vr?e.result+=E.repeat(`
`,o?1+u:u):i===ke&&o&&(e.result+=`
`);break}for(t?q(p)?(c=!0,e.result+=E.repeat(`
`,o?1+u:u)):c?(c=!1,e.result+=E.repeat(`
`,u+1)):u===0?o&&(e.result+=" "):e.result+=E.repeat(`
`,u):e.result+=E.repeat(`
`,o?1+u:u),o=!0,s=!0,u=0,r=e.position;!S(p)&&p!==0;)p=e.input.charCodeAt(++e.position);O(e,r,e.position,!1)}return!0}function Zr(e,n){var r,t=e.tag,i=e.anchor,o=[],s,a=!1,u;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),u=e.input.charCodeAt(e.position);u!==0&&!(u!==45||(s=e.input.charCodeAt(e.position+1),!F(s)));){if(a=!0,e.position++,w(e,!0,-1)&&e.lineIndent<=n){o.push(null),u=e.input.charCodeAt(e.position);continue}if(r=e.line,Y(e,n,nn,!1,!0),o.push(e.result),w(e,!0,-1),u=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>n)&&u!==0)d(e,"bad indentation of a sequence entry");else if(e.lineIndent<n)break}return a?(e.tag=t,e.anchor=i,e.kind="sequence",e.result=o,!0):!1}function Ao(e,n,r){var t,i,o,s,a=e.tag,u=e.anchor,c={},f={},p=null,l=null,h=null,m=!1,A=!1,x;for(e.anchor!==null&&(e.anchorMap[e.anchor]=c),x=e.input.charCodeAt(e.position);x!==0;){if(t=e.input.charCodeAt(e.position+1),o=e.line,s=e.position,(x===63||x===58)&&F(t))x===63?(m&&(K(e,c,f,p,l,null),p=l=h=null),A=!0,m=!0,i=!0):m?(m=!1,i=!0):d(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,x=t;else if(Y(e,r,rn,!1,!0))if(e.line===o){for(x=e.input.charCodeAt(e.position);q(x);)x=e.input.charCodeAt(++e.position);if(x===58)x=e.input.charCodeAt(++e.position),F(x)||d(e,"a whitespace character is expected after the key-value separator within a block mapping"),m&&(K(e,c,f,p,l,null),p=l=h=null),A=!0,m=!1,i=!1,p=e.tag,l=e.result;else if(A)d(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=a,e.anchor=u,!0}else if(A)d(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=a,e.anchor=u,!0;else break;if((e.line===o||e.lineIndent>n)&&(Y(e,n,ue,!0,i)&&(m?l=e.result:h=e.result),m||(K(e,c,f,p,l,h,o,s),p=l=h=null),w(e,!0,-1),x=e.input.charCodeAt(e.position)),e.lineIndent>n&&x!==0)d(e,"bad indentation of a mapping entry");else if(e.lineIndent<n)break}return m&&K(e,c,f,p,l,null),A&&(e.tag=a,e.anchor=u,e.kind="mapping",e.result=c),A}function vo(e){var n,r=!1,t=!1,i,o,s;if(s=e.input.charCodeAt(e.position),s!==33)return!1;if(e.tag!==null&&d(e,"duplication of a tag property"),s=e.input.charCodeAt(++e.position),s===60?(r=!0,s=e.input.charCodeAt(++e.position)):s===33?(t=!0,i="!!",s=e.input.charCodeAt(++e.position)):i="!",n=e.position,r){do s=e.input.charCodeAt(++e.position);while(s!==0&&s!==62);e.position<e.length?(o=e.input.slice(n,e.position),s=e.input.charCodeAt(++e.position)):d(e,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!F(s);)s===33&&(t?d(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(n-1,e.position+1),tn.test(i)||d(e,"named tag handle cannot contain such characters"),t=!0,n=e.position+1)),s=e.input.charCodeAt(++e.position);o=e.input.slice(n,e.position),ao.test(o)&&d(e,"tag suffix cannot contain flow indicator characters")}return o&&!on.test(o)&&d(e,"tag name cannot contain such characters: "+o),r?e.tag=o:T.call(e.tagMap,i)?e.tag=e.tagMap[i]+o:i==="!"?e.tag="!"+o:i==="!!"?e.tag="tag:yaml.org,2002:"+o:d(e,'undeclared tag handle "'+i+'"'),!0}function wo(e){var n,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&d(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),n=e.position;r!==0&&!F(r)&&!H(r);)r=e.input.charCodeAt(++e.position);return e.position===n&&d(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(n,e.position),!0}function bo(e){var n,r,t;if(t=e.input.charCodeAt(e.position),t!==42)return!1;for(t=e.input.charCodeAt(++e.position),n=e.position;t!==0&&!F(t)&&!H(t);)t=e.input.charCodeAt(++e.position);return e.position===n&&d(e,"name of an alias node must contain at least one character"),r=e.input.slice(n,e.position),T.call(e.anchorMap,r)||d(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],w(e,!0,-1),!0}function Y(e,n,r,t,i){var o,s,a,u=1,c=!1,f=!1,p,l,h,m,A;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=s=a=ue===r||nn===r,t&&w(e,!0,-1)&&(c=!0,e.lineIndent>n?u=1:e.lineIndent===n?u=0:e.lineIndent<n&&(u=-1)),u===1)for(;vo(e)||wo(e);)w(e,!0,-1)?(c=!0,a=o,e.lineIndent>n?u=1:e.lineIndent===n?u=0:e.lineIndent<n&&(u=-1)):a=!1;if(a&&(a=c||i),(u===1||ue===r)&&(ae===r||rn===r?m=n:m=n+1,A=e.position-e.lineStart,u===1?a&&(Zr(e,A)||Ao(e,A,m))||xo(e,m)?f=!0:(s&&yo(e,m)||go(e,m)||mo(e,m)?f=!0:bo(e)?(f=!0,(e.tag!==null||e.anchor!==null)&&d(e,"alias node should not have any properties")):ho(e,m,ae===r)&&(f=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):u===0&&(f=a&&Zr(e,A))),e.tag!==null&&e.tag!=="!")if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&d(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),p=0,l=e.implicitTypes.length;p<l;p+=1)if(h=e.implicitTypes[p],h.resolve(e.result)){e.result=h.construct(e.result),e.tag=h.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else T.call(e.typeMap[e.kind||"fallback"],e.tag)?(h=e.typeMap[e.kind||"fallback"][e.tag],e.result!==null&&h.kind!==e.kind&&d(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+h.kind+'", not "'+e.kind+'"'),h.resolve(e.result)?(e.result=h.construct(e.result),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):d(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):d(e,"unknown tag !<"+e.tag+">");return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||f}function ko(e){var n=e.position,r,t,i,o=!1,s;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};(s=e.input.charCodeAt(e.position))!==0&&(w(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||s!==37));){for(o=!0,s=e.input.charCodeAt(++e.position),r=e.position;s!==0&&!F(s);)s=e.input.charCodeAt(++e.position);for(t=e.input.slice(r,e.position),i=[],t.length<1&&d(e,"directive name must not be less than one character in length");s!==0;){for(;q(s);)s=e.input.charCodeAt(++e.position);if(s===35){do s=e.input.charCodeAt(++e.position);while(s!==0&&!S(s));break}if(S(s))break;for(r=e.position;s!==0&&!F(s);)s=e.input.charCodeAt(++e.position);i.push(e.input.slice(r,e.position))}s!==0&&Ce(e),T.call(Qr,t)?Qr[t](e,t,i):ce(e,'unknown document directive "'+t+'"')}if(w(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,w(e,!0,-1)):o&&d(e,"directives end mark is expected"),Y(e,e.lineIndent-1,ue,!1,!0),w(e,!0,-1),e.checkLineBreaks&&so.test(e.input.slice(n,e.position))&&ce(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&le(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,w(e,!0,-1));return}if(e.position<e.length-1)d(e,"end of the stream or a document separator is expected");else return}function cn(e,n){e=String(e),n=n||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new fo(e,n),t=e.indexOf("\0");for(t!==-1&&(r.position=t,d(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)ko(r);return r.documents}function ln(e,n,r){n!==null&&typeof n=="object"&&typeof r=="undefined"&&(r=n,n=null);var t=cn(e,r);if(typeof n!="function")return t;for(var i=0,o=t.length;i<o;i+=1)n(t[i])}function pn(e,n){var r=cn(e,n);if(r.length!==0){if(r.length===1)return r[0];throw new zr("expected a single document in the stream, but found more")}}function Co(e,n,r){return typeof n=="object"&&n!==null&&typeof r=="undefined"&&(r=n,n=null),ln(e,n,E.extend({schema:en},r))}function Fo(e,n){return pn(e,E.extend({schema:en},n))}X.exports.loadAll=ln;X.exports.load=pn;X.exports.safeLoadAll=Co;X.exports.safeLoad=Fo});var Bn=g((oa,Oe)=>{"use strict";var z=N(),ee=D(),So=Q(),Eo=j(),vn=Object.prototype.toString,wn=Object.prototype.hasOwnProperty,_o=9,Z=10,Oo=13,To=32,Io=33,No=34,bn=35,Lo=37,Ro=38,Bo=39,qo=42,kn=44,Mo=45,Cn=58,Do=61,Po=62,jo=63,Ho=64,Fn=91,Sn=93,Ko=96,En=123,Yo=124,_n=125,k={};k[0]="\\0";k[7]="\\a";k[8]="\\b";k[9]="\\t";k[10]="\\n";k[11]="\\v";k[12]="\\f";k[13]="\\r";k[27]="\\e";k[34]='\\"';k[92]="\\\\";k[133]="\\N";k[160]="\\_";k[8232]="\\L";k[8233]="\\P";var Uo=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function $o(e,n){var r,t,i,o,s,a,u;if(n===null)return{};for(r={},t=Object.keys(n),i=0,o=t.length;i<o;i+=1)s=t[i],a=String(n[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),u=e.compiledTypeMap.fallback[s],u&&wn.call(u.styleAliases,a)&&(a=u.styleAliases[a]),r[s]=a;return r}function hn(e){var n,r,t;if(n=e.toString(16).toUpperCase(),e<=255)r="x",t=2;else if(e<=65535)r="u",t=4;else if(e<=4294967295)r="U",t=8;else throw new ee("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+z.repeat("0",t-n.length)+n}function Wo(e){this.schema=e.schema||So,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=z.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=$o(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function dn(e,n){for(var r=z.repeat(" ",n),t=0,i=-1,o="",s,a=e.length;t<a;)i=e.indexOf(`
`,t),i===-1?(s=e.slice(t),t=a):(s=e.slice(t,i+1),t=i+1),s.length&&s!==`
`&&(o+=r),o+=s;return o}function Se(e,n){return`
`+z.repeat(" ",e.indent*n)}function Vo(e,n){var r,t,i;for(r=0,t=e.implicitTypes.length;r<t;r+=1)if(i=e.implicitTypes[r],i.resolve(n))return!0;return!1}function _e(e){return e===To||e===_o}function U(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==65279||65536<=e&&e<=1114111}function Go(e){return U(e)&&!_e(e)&&e!==65279&&e!==Oo&&e!==Z}function gn(e,n){return U(e)&&e!==65279&&e!==kn&&e!==Fn&&e!==Sn&&e!==En&&e!==_n&&e!==Cn&&(e!==bn||n&&Go(n))}function Jo(e){return U(e)&&e!==65279&&!_e(e)&&e!==Mo&&e!==jo&&e!==Cn&&e!==kn&&e!==Fn&&e!==Sn&&e!==En&&e!==_n&&e!==bn&&e!==Ro&&e!==qo&&e!==Io&&e!==Yo&&e!==Do&&e!==Po&&e!==Bo&&e!==No&&e!==Lo&&e!==Ho&&e!==Ko}function On(e){var n=/^\n* /;return n.test(e)}var Tn=1,In=2,Nn=3,Ln=4,pe=5;function Qo(e,n,r,t,i){var o,s,a,u=!1,c=!1,f=t!==-1,p=-1,l=Jo(e.charCodeAt(0))&&!_e(e.charCodeAt(e.length-1));if(n)for(o=0;o<e.length;o++){if(s=e.charCodeAt(o),!U(s))return pe;a=o>0?e.charCodeAt(o-1):null,l=l&&gn(s,a)}else{for(o=0;o<e.length;o++){if(s=e.charCodeAt(o),s===Z)u=!0,f&&(c=c||o-p-1>t&&e[p+1]!==" ",p=o);else if(!U(s))return pe;a=o>0?e.charCodeAt(o-1):null,l=l&&gn(s,a)}c=c||f&&o-p-1>t&&e[p+1]!==" "}return!u&&!c?l&&!i(e)?Tn:In:r>9&&On(e)?pe:c?Ln:Nn}function Xo(e,n,r,t){e.dump=function(){if(n.length===0)return"''";if(!e.noCompatMode&&Uo.indexOf(n)!==-1)return"'"+n+"'";var i=e.indent*Math.max(1,r),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-i),s=t||e.flowLevel>-1&&r>=e.flowLevel;function a(u){return Vo(e,u)}switch(Qo(n,s,e.indent,o,a)){case Tn:return n;case In:return"'"+n.replace(/'/g,"''")+"'";case Nn:return"|"+mn(n,e.indent)+xn(dn(n,i));case Ln:return">"+mn(n,e.indent)+xn(dn(Zo(n,o),i));case pe:return'"'+zo(n,o)+'"';default:throw new ee("impossible error: invalid scalar style")}}()}function mn(e,n){var r=On(e)?String(n):"",t=e[e.length-1]===`
`,i=t&&(e[e.length-2]===`
`||e===`
`),o=i?"+":t?"":"-";return r+o+`
`}function xn(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function Zo(e,n){for(var r=/(\n+)([^\n]*)/g,t=function(){var c=e.indexOf(`
`);return c=c!==-1?c:e.length,r.lastIndex=c,yn(e.slice(0,c),n)}(),i=e[0]===`
`||e[0]===" ",o,s;s=r.exec(e);){var a=s[1],u=s[2];o=u[0]===" ",t+=a+(!i&&!o&&u!==""?`
`:"")+yn(u,n),i=o}return t}function yn(e,n){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,t,i=0,o,s=0,a=0,u="";t=r.exec(e);)a=t.index,a-i>n&&(o=s>i?s:a,u+=`
`+e.slice(i,o),i=o+1),s=a;return u+=`
`,e.length-i>n&&s>i?u+=e.slice(i,s)+`
`+e.slice(s+1):u+=e.slice(i),u.slice(1)}function zo(e){for(var n="",r,t,i,o=0;o<e.length;o++){if(r=e.charCodeAt(o),r>=55296&&r<=56319&&(t=e.charCodeAt(o+1),t>=56320&&t<=57343)){n+=hn((r-55296)*1024+t-56320+65536),o++;continue}i=k[r],n+=!i&&U(r)?e[o]:i||hn(r)}return n}function es(e,n,r){var t="",i=e.tag,o,s;for(o=0,s=r.length;o<s;o+=1)M(e,n,r[o],!1,!1)&&(o!==0&&(t+=","+(e.condenseFlow?"":" ")),t+=e.dump);e.tag=i,e.dump="["+t+"]"}function rs(e,n,r,t){var i="",o=e.tag,s,a;for(s=0,a=r.length;s<a;s+=1)M(e,n+1,r[s],!0,!0)&&((!t||s!==0)&&(i+=Se(e,n)),e.dump&&Z===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=o,e.dump=i||"[]"}function ns(e,n,r){var t="",i=e.tag,o=Object.keys(r),s,a,u,c,f;for(s=0,a=o.length;s<a;s+=1)f="",s!==0&&(f+=", "),e.condenseFlow&&(f+='"'),u=o[s],c=r[u],M(e,n,u,!1,!1)&&(e.dump.length>1024&&(f+="? "),f+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),M(e,n,c,!1,!1)&&(f+=e.dump,t+=f));e.tag=i,e.dump="{"+t+"}"}function is(e,n,r,t){var i="",o=e.tag,s=Object.keys(r),a,u,c,f,p,l;if(e.sortKeys===!0)s.sort();else if(typeof e.sortKeys=="function")s.sort(e.sortKeys);else if(e.sortKeys)throw new ee("sortKeys must be a boolean or a function");for(a=0,u=s.length;a<u;a+=1)l="",(!t||a!==0)&&(l+=Se(e,n)),c=s[a],f=r[c],M(e,n+1,c,!0,!0,!0)&&(p=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,p&&(e.dump&&Z===e.dump.charCodeAt(0)?l+="?":l+="? "),l+=e.dump,p&&(l+=Se(e,n)),M(e,n+1,f,!0,p)&&(e.dump&&Z===e.dump.charCodeAt(0)?l+=":":l+=": ",l+=e.dump,i+=l));e.tag=o,e.dump=i||"{}"}function An(e,n,r){var t,i,o,s,a,u;for(i=r?e.explicitTypes:e.implicitTypes,o=0,s=i.length;o<s;o+=1)if(a=i[o],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof n=="object"&&n instanceof a.instanceOf)&&(!a.predicate||a.predicate(n))){if(e.tag=r?a.tag:"?",a.represent){if(u=e.styleMap[a.tag]||a.defaultStyle,vn.call(a.represent)==="[object Function]")t=a.represent(n,u);else if(wn.call(a.represent,u))t=a.represent[u](n,u);else throw new ee("!<"+a.tag+'> tag resolver accepts not "'+u+'" style');e.dump=t}return!0}return!1}function M(e,n,r,t,i,o){e.tag=null,e.dump=r,An(e,r,!1)||An(e,r,!0);var s=vn.call(e.dump);t&&(t=e.flowLevel<0||e.flowLevel>n);var a=s==="[object Object]"||s==="[object Array]",u,c;if(a&&(u=e.duplicates.indexOf(r),c=u!==-1),(e.tag!==null&&e.tag!=="?"||c||e.indent!==2&&n>0)&&(i=!1),c&&e.usedDuplicates[u])e.dump="*ref_"+u;else{if(a&&c&&!e.usedDuplicates[u]&&(e.usedDuplicates[u]=!0),s==="[object Object]")t&&Object.keys(e.dump).length!==0?(is(e,n,e.dump,i),c&&(e.dump="&ref_"+u+e.dump)):(ns(e,n,e.dump),c&&(e.dump="&ref_"+u+" "+e.dump));else if(s==="[object Array]"){var f=e.noArrayIndent&&n>0?n-1:n;t&&e.dump.length!==0?(rs(e,f,e.dump,i),c&&(e.dump="&ref_"+u+e.dump)):(es(e,f,e.dump),c&&(e.dump="&ref_"+u+" "+e.dump))}else if(s==="[object String]")e.tag!=="?"&&Xo(e,e.dump,n,o);else{if(e.skipInvalid)return!1;throw new ee("unacceptable kind of an object to dump "+s)}e.tag!==null&&e.tag!=="?"&&(e.dump="!<"+e.tag+"> "+e.dump)}return!0}function ts(e,n){var r=[],t=[],i,o;for(Ee(e,r,t),i=0,o=t.length;i<o;i+=1)n.duplicates.push(r[t[i]]);n.usedDuplicates=new Array(o)}function Ee(e,n,r){var t,i,o;if(e!==null&&typeof e=="object")if(i=n.indexOf(e),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(n.push(e),Array.isArray(e))for(i=0,o=e.length;i<o;i+=1)Ee(e[i],n,r);else for(t=Object.keys(e),i=0,o=t.length;i<o;i+=1)Ee(e[t[i]],n,r)}function Rn(e,n){n=n||{};var r=new Wo(n);return r.noRefs||ts(e,r),M(r,0,e,!0,!0)?r.dump+`
`:""}function os(e,n){return Rn(e,z.extend({schema:Eo},n))}Oe.exports.dump=Rn;Oe.exports.safeDump=os});var Mn=g((sa,v)=>{"use strict";var fe=fn(),qn=Bn();function he(e){return function(){throw new Error("Function "+e+" is deprecated and cannot be used.")}}v.exports.Type=b();v.exports.Schema=L();v.exports.FAILSAFE_SCHEMA=oe();v.exports.JSON_SCHEMA=ve();v.exports.CORE_SCHEMA=we();v.exports.DEFAULT_SAFE_SCHEMA=j();v.exports.DEFAULT_FULL_SCHEMA=Q();v.exports.load=fe.load;v.exports.loadAll=fe.loadAll;v.exports.safeLoad=fe.safeLoad;v.exports.safeLoadAll=fe.safeLoadAll;v.exports.dump=qn.dump;v.exports.safeDump=qn.safeDump;v.exports.YAMLException=D();v.exports.MINIMAL_SCHEMA=oe();v.exports.SAFE_SCHEMA=j();v.exports.DEFAULT_SCHEMA=Q();v.exports.scan=he("scan");v.exports.parse=he("parse");v.exports.compose=he("compose");v.exports.addConstructor=he("addConstructor")});var Pn=g((aa,Dn)=>{"use strict";var ss=Mn();Dn.exports=ss});var Te=g((exports,module)=>{"use strict";var yaml=Pn(),engines=exports=module.exports;engines.yaml={parse:yaml.safeLoad.bind(yaml),stringify:yaml.safeDump.bind(yaml)};engines.json={parse:JSON.parse.bind(JSON),stringify:function(e,n){let r=Object.assign({replacer:null,space:2},n);return JSON.stringify(e,r.replacer,r.space)}};engines.javascript={parse:function parse(str,options,wrap){try{return wrap!==!1&&(str=`(function() {
return `+str.trim()+`;
}());`),eval(str)||{}}catch(e){if(wrap!==!1&&/(unexpected|identifier)/i.test(e.message))return parse(str,options,!1);throw new SyntaxError(e)}},stringify:function(){throw new Error("stringifying JavaScript is not supported")}}});var Hn=g((ua,jn)=>{"use strict";jn.exports=function(e){return typeof e=="string"&&e.charAt(0)==="\uFEFF"?e.slice(1):e}});var de=g(_=>{"use strict";var Kn=Hn(),Yn=G();_.define=function(e,n,r){Reflect.defineProperty(e,n,{enumerable:!1,configurable:!0,writable:!0,value:r})};_.isBuffer=function(e){return Yn(e)==="buffer"};_.isObject=function(e){return Yn(e)==="object"};_.toBuffer=function(e){return typeof e=="string"?Buffer.from(e):e};_.toString=function(e){if(_.isBuffer(e))return Kn(String(e));if(typeof e!="string")throw new TypeError("expected input to be a string or buffer");return Kn(e)};_.arrayify=function(e){return e?Array.isArray(e)?e:[e]:[]};_.startsWith=function(e,n,r){return typeof r!="number"&&(r=n.length),e.slice(0,r)===n}});var re=g((la,Un)=>{"use strict";var as=Te(),us=de();Un.exports=function(e){let n=Object.assign({},e);return n.delimiters=us.arrayify(n.delims||n.delimiters||"---"),n.delimiters.length===1&&n.delimiters.push(n.delimiters[0]),n.language=(n.language||n.lang||"yaml").toLowerCase(),n.engines=Object.assign({},as,n.parsers,n.engines),n}});var Ie=g((pa,$n)=>{"use strict";$n.exports=function(e,n){let r=n.engines[e]||n.engines[cs(e)];if(typeof r=="undefined")throw new Error('gray-matter engine "'+e+'" is not registered');return typeof r=="function"&&(r={parse:r}),r};function cs(e){switch(e.toLowerCase()){case"js":case"javascript":return"javascript";case"coffee":case"coffeescript":case"cson":return"coffee";case"yaml":case"yml":return"yaml";default:return e}}});var Ne=g((fa,Wn)=>{"use strict";var ls=G(),ps=Ie(),fs=re();Wn.exports=function(e,n,r){if(n==null&&r==null)switch(ls(e)){case"object":n=e.data,r={};break;case"string":return e;default:throw new TypeError("expected file to be a string or object")}let t=e.content,i=fs(r);if(n==null){if(!i.data)return e;n=i.data}let o=e.language||i.language,s=ps(o,i);if(typeof s.stringify!="function")throw new TypeError('expected "'+o+'.stringify" to be a function');n=Object.assign({},e.data,n);let a=i.delimiters[0],u=i.delimiters[1],c=s.stringify(n,r).trim(),f="";return c!=="{}"&&(f=$(a)+$(c)+$(u)),typeof e.excerpt=="string"&&e.excerpt!==""&&t.indexOf(e.excerpt.trim())===-1&&(f+=$(e.excerpt)+$(u)),f+$(t)};function $(e){return e.slice(-1)!==`
`?e+`
`:e}});var Gn=g((ha,Vn)=>{"use strict";var hs=re();Vn.exports=function(e,n){let r=hs(n);if(e.data==null&&(e.data={}),typeof r.excerpt=="function")return r.excerpt(e,r);let t=e.data.excerpt_separator||r.excerpt_separator;if(t==null&&(r.excerpt===!1||r.excerpt==null))return e;let i=typeof r.excerpt=="string"?r.excerpt:t||r.delimiters[0],o=e.content.indexOf(i);return o!==-1&&(e.excerpt=e.content.slice(0,o)),e}});var Xn=g((da,Qn)=>{"use strict";var Jn=G(),ds=Ne(),W=de();Qn.exports=function(e){return Jn(e)!=="object"&&(e={content:e}),Jn(e.data)!=="object"&&(e.data={}),e.contents&&e.content==null&&(e.content=e.contents),W.define(e,"orig",W.toBuffer(e.content)),W.define(e,"language",e.language||""),W.define(e,"matter",e.matter||""),W.define(e,"stringify",function(n,r){return r&&r.language&&(e.language=r.language),ds(e,n,r)}),e.content=W.toString(e.content),e.isEmpty=!1,e.excerpt="",e}});var zn=g((ga,Zn)=>{"use strict";var gs=Ie(),ms=re();Zn.exports=function(e,n,r){let t=ms(r),i=gs(e,t);if(typeof i.parse!="function")throw new TypeError('expected "'+e+'.parse" to be a function');return i.parse(n,t)}});var ii=g((ma,ni)=>{"use strict";var xs=require("fs"),ys=Ge(),Le=re(),As=Ne(),ei=Gn(),vs=Te(),ws=Xn(),bs=zn(),ri=de();function C(e,n){if(e==="")return{data:{},content:e,excerpt:"",orig:e};let r=ws(e),t=C.cache[r.content];if(!n){if(t)return r=Object.assign({},t),r.orig=t.orig,r;C.cache[r.content]=r}return ks(r,n)}function ks(e,n){let r=Le(n),t=r.delimiters[0],i=`
`+r.delimiters[1],o=e.content;r.language&&(e.language=r.language);let s=t.length;if(!ri.startsWith(o,t,s))return ei(e,r),e;if(o.charAt(s)===t.slice(-1))return e;o=o.slice(s);let a=o.length,u=C.language(o,r);u.name&&(e.language=u.name,o=o.slice(u.raw.length));let c=o.indexOf(i);return c===-1&&(c=a),e.matter=o.slice(0,c),e.matter.replace(/^\s*#[^\n]+/gm,"").trim()===""?(e.isEmpty=!0,e.empty=e.content,e.data={}):e.data=bs(e.language,e.matter,r),c===a?e.content="":(e.content=o.slice(c+i.length),e.content[0]==="\r"&&(e.content=e.content.slice(1)),e.content[0]===`
`&&(e.content=e.content.slice(1))),ei(e,r),(r.sections===!0||typeof r.section=="function")&&ys(e,r.section),e}C.engines=vs;C.stringify=function(e,n,r){return typeof e=="string"&&(e=C(e,r)),As(e,n,r)};C.read=function(e,n){let r=xs.readFileSync(e,"utf8"),t=C(r,n);return t.path=e,t};C.test=function(e,n){return ri.startsWith(e,Le(n).delimiters[0])};C.language=function(e,n){let t=Le(n).delimiters[0];C.test(e)&&(e=e.slice(t.length));let i=e.slice(0,e.search(/\r?\n/));return{raw:i,name:i?i.trim():""}};C.cache={};C.clearCache=function(){C.cache={}};ni.exports=C});var Ss={};li(Ss,{default:()=>me});module.exports=pi(Ss);var y=require("obsidian"),Be=ie(require("crypto")),qe=ie(ii());var Re=ie(require("fs")),ti=ie(require("path")),ge=class{constructor(n){this.koreaderBasePath=n}async scan(){let n={};try{let r=await this.findMetadataFiles();for(let t of r)try{let i=await this.parseMetadataFile(t);if(i&&this.hasContent(i)){let o=`${i.title} - ${i.authors}`;n[o]=i}}catch(i){console.warn(`Failed to parse metadata file: ${t}`,i)}}catch(r){throw console.error("Error scanning KOReader metadata:",r),r}return n}async findMetadataFiles(){let n=[],r=async t=>{try{let i=await Re.promises.readdir(t,{withFileTypes:!0});for(let o of i){let s=ti.join(t,o.name);o.isDirectory()?await r(s):o.isFile()&&this.isMetadataFile(o.name)&&n.push(s)}}catch(i){console.warn(`Error scanning directory: ${t}`,i)}};return await r(this.koreaderBasePath),n}isMetadataFile(n){return/^metadata\..*\.lua$/.test(n)}async parseMetadataFile(n){try{let r=await Re.promises.readFile(n,"utf8"),t=this.parseLuaContent(r);if(!t||!t.doc_props)return null;let{title:i,authors:o}=t.doc_props,s=t.percent_finished||0,a={};if(t.highlight)for(let[c,f]of Object.entries(t.highlight)){let p=parseInt(c);Array.isArray(f)&&(a[p]=f.map(l=>({chapter:l.chapter||"",datetime:l.datetime||"",highlighted:l.highlighted||!1,notes:l.notes||"",page:l.page||"",pos0:l.pos0||"",pos1:l.pos1||"",text:l.text||"",drawer:l.drawer||""})))}let u={};if(t.bookmarks)for(let[c,f]of Object.entries(t.bookmarks)){let p=parseInt(c);if(f&&typeof f=="object"){let l=f;u[p]={chapter:l.chapter||"",datetime:l.datetime||"",highlighted:l.highlighted||!1,notes:l.notes||"",page:l.page||"",pos0:l.pos0||"",pos1:l.pos1||"",text:l.text||""}}}return{title:i,authors:o,bookmarks:u,highlight:a,percent_finished:s*100,doc_props:t.doc_props}}catch(r){return console.error(`Error parsing metadata file: ${n}`,r),null}}parseLuaContent(n){try{let r=n.replace(/--.*$/gm,"").replace(/return\s*/,"").replace(/\[(\d+)\]\s*=\s*/g,'"$1": ').replace(/(\w+)\s*=\s*/g,'"$1": ').replace(/,(\s*})/g,"$1").replace(/,(\s*\])/g,"$1");return JSON.parse(r)}catch(r){return console.warn("Failed to parse Lua content as JSON, trying alternative method"),this.parseLuaContentAlternative(n)}}parseLuaContentAlternative(n){let r={},t=n.match(/doc_props\s*=\s*{([^}]+)}/);t&&(r.doc_props=this.parseLuaTable(t[1]));let i=n.match(/percent_finished\s*=\s*([\d.]+)/);return i&&(r.percent_finished=parseFloat(i[1])),r.highlight={},r.bookmarks={},r}parseLuaTable(n){let r={},t=n.split(`
`);for(let i of t){let o=i.match(/(\w+)\s*=\s*["']([^"']+)["']/);o&&(r[o[1]]=o[2])}return r}hasContent(n){let r=Object.keys(n.highlight).length>0,t=Object.keys(n.bookmarks).length>0;return r||t}};var Cs={koreaderBasePath:"/media/user/KOBOeReader",obsidianNoteFolder:"/",noteTitleOptions:{maxWords:5,maxLength:25},bookTitleOptions:{maxWords:5,maxLength:25,prefix:"(book) "},keepInSync:!1,aFolderForEachBook:!1,customTemplate:!1,createBookIndex:!1,importedNotes:{},enableResetImportedNotes:!1,syncBookmarks:!0,syncHighlights:!0,defaultTemplate:`## Book: [[{{bookTitle}}|{{title}}]]

**Author:** {{authors}}  
**Chapter:** {{chapter}}  
**Page:** {{page}}  
**Date:** {{datetime}}

**Highlight:**
{{highlight}}

{{#if notes}}
**Notes:**
{{notes}}
{{/if}}

{{#if text}}
**Context:**
{{text}}
{{/if}}`,bookIndexTemplate:`# {{title}} by {{authors}}

**Progress:** {{percent_finished}}%

## Highlights and Bookmarks

{{#each highlights}}
### {{chapter}} (Page {{page}})
- **{{datetime}}** - {{highlight}}
{{#if notes}}
  - Notes: {{notes}}
{{/if}}
{{/each}}`},V="koreader-sync",Fs="koreader-sync-note",me=class extends y.Plugin{async onload(){await this.loadSettings();let r=this.addRibbonIcon("documents","Sync KOReader highlights",this.syncHighlights.bind(this));this.addCommand({id:"koreader-sync-highlights",name:"Sync KOReader Highlights",callback:()=>{this.syncHighlights()}}),this.addCommand({id:"koreader-reset-imported",name:"Reset Imported Notes List",checkCallback:t=>this.settings.enableResetImportedNotes?(t||(this.settings.importedNotes={},this.settings.enableResetImportedNotes=!1,this.saveSettings(),new y.Notice("Imported notes list has been reset")),!0):!1}),this.addSettingTab(new Me(this.app,this))}onunload(){}async loadSettings(){this.settings=Object.assign({},Cs,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}manageTitle(r,t={}){return r=r.replace(/[\\\/:]/g,"_").replace(/_+/g,"_").trim().replace(/^_+|_+$/g,"").replace(/\s+/g," "),t.maxLength&&r.length>t.maxLength&&(r=`${r.substring(0,t.maxLength)}...`),t.maxWords&&r.split(" ").length>t.maxWords&&(r=`${r.split(" ").slice(0,t.maxWords).join(" ")}...`),`${t.prefix||""}${r}${t.suffix||""}`}generateUniqueId(r,t,i){let o=`${r.title} - ${r.authors} - ${t.pos0} - ${t.pos1}`;return Be.createHash("md5").update(o).digest("hex")}extractPageNumber(r){let t=r.match(/\d+/);return t?parseInt(t[0]):0}renderTemplate(r,t){return r.replace(/\{\{([^}]+)\}\}/g,(i,o)=>{let s=this.getNestedValue(t,o.trim());return s!==void 0?String(s):""})}getNestedValue(r,t){return t.split(".").reduce((i,o)=>i&&i[o]!==void 0?i[o]:void 0,r)}async createNoteContent(r){let t=this.settings.customTemplate&&this.settings.templatePath?await this.getCustomTemplate():this.settings.defaultTemplate,i={title:r.title,authors:r.authors,bookTitle:r.title,chapter:r.chapter,page:r.page,datetime:r.datetime,highlight:r.highlight,notes:r.notes,text:r.text,isBookmark:r.isBookmark};return this.renderTemplate(t,i)}async getCustomTemplate(){try{let r=this.app.vault.getAbstractFileByPath(this.settings.templatePath);if(r&&r instanceof y.TFile)return await this.app.vault.read(r)}catch(r){console.warn("Failed to load custom template, using default")}return this.settings.defaultTemplate}createFrontMatter(r,t,i){return{type:Fs,uniqueId:t,data:{title:r.title,authors:r.authors,chapter:r.chapter,page:r.page,highlight:r.highlight,datetime:r.datetime,text:r.text,notes:r.notes,pos0:r.pos0,pos1:r.pos1,isBookmark:r.isBookmark},metadata:{body_hash:Be.createHash("md5").update(r.highlight).digest("hex"),keep_in_sync:this.settings.keepInSync,yet_to_be_edited:!0,managed_book_title:i,unique_id:t,source_type:r.isBookmark?"bookmark":"highlight"}}}async createBookIndex(r,t,i){if(!this.settings.createBookIndex)return;let o=[];if(this.settings.syncHighlights)for(let[c,f]of Object.entries(r.highlight)){let p=parseInt(c);for(let l of f)o.push({title:r.title,authors:r.authors,chapter:l.chapter,page:this.extractPageNumber(l.page),highlight:l.text||l.notes,datetime:l.datetime,text:l.text||"",notes:l.notes,pos0:l.pos0,pos1:l.pos1,isBookmark:!1})}if(this.settings.syncBookmarks)for(let c of Object.values(r.bookmarks))o.push({title:r.title,authors:r.authors,chapter:c.chapter,page:this.extractPageNumber(c.page),highlight:c.text||c.notes,datetime:c.datetime,text:c.text||"",notes:c.notes,pos0:c.pos0,pos1:c.pos1,isBookmark:!0});o.sort((c,f)=>c.page-f.page);let s={title:r.title,authors:r.authors,percent_finished:r.percent_finished,highlights:o},a=this.renderTemplate(this.settings.bookIndexTemplate,s),u=(0,y.normalizePath)(`${i}/${t}.md`);try{await this.app.vault.create(u,a)}catch(c){console.warn(`Failed to create book index for ${t}:`,c)}}async syncHighlights(){try{new y.Notice("Starting KOReader sync...");let t=await new ge(this.settings.koreaderBasePath).scan();if(Object.keys(t).length===0){new y.Notice("No books with highlights found in KOReader");return}let i=this.getExistingNotes(),o=0,s=0;for(let[a,u]of Object.entries(t)){let c=this.manageTitle(u.title,this.settings.bookTitleOptions),f=this.settings.aFolderForEachBook?(0,y.normalizePath)(`${this.settings.obsidianNoteFolder}/${c}`):this.settings.obsidianNoteFolder;if(this.settings.aFolderForEachBook&&await this.ensureFolderExists(f),await this.createBookIndex(u,c,f),this.settings.syncHighlights)for(let[p,l]of Object.entries(u.highlight)){let h=parseInt(p);for(let m of l){let A=await this.processHighlight(u,m,!1,f,c,i);A==="imported"&&o++,A==="updated"&&s++}}if(this.settings.syncBookmarks)for(let p of Object.values(u.bookmarks)){let l=await this.processHighlight(u,p,!0,f,c,i);l==="imported"&&o++,l==="updated"&&s++}}await this.saveSettings(),new y.Notice(`Sync complete! Imported: ${o}, Updated: ${s}`)}catch(r){console.error("Error during sync:",r),new y.Notice(`Sync failed: ${r.message}`)}}async processHighlight(r,t,i,o,s,a){let u=this.generateUniqueId(r,t,i);if(this.settings.importedNotes[u]&&!this.settings.keepInSync)return"skipped";let c={title:r.title,authors:r.authors,chapter:t.chapter,page:this.extractPageNumber(t.page),highlight:t.text||t.notes,datetime:t.datetime,text:t.text||"",notes:t.notes,pos0:t.pos0,pos1:t.pos1,isBookmark:i},f=await this.createNoteContent(c),p=this.createFrontMatter(c,u,s),l=this.manageTitle(c.highlight,this.settings.noteTitleOptions),h=(0,y.normalizePath)(`${o}/${l}.md`),m=a.get(u);if(m&&this.settings.keepInSync&&!m.yet_to_be_edited)try{return await this.app.vault.modify(m.file,qe.stringify(f,{[V]:p})),"updated"}catch(A){return console.warn(`Failed to update note: ${h}`,A),"skipped"}if(!m)try{return await this.app.vault.create(h,qe.stringify(f,{[V]:p})),this.settings.importedNotes[u]=!0,"imported"}catch(A){return console.warn(`Failed to create note: ${h}`,A),"skipped"}return"skipped"}getExistingNotes(){let r=new Map;return this.app.vault.getMarkdownFiles().forEach(t=>{var s;let i=this.app.metadataCache.getFileCache(t),o=i==null?void 0:i.frontmatter;(s=o==null?void 0:o[V])!=null&&s.uniqueId&&r.set(o[V].uniqueId,{file:t,keep_in_sync:o[V].metadata.keep_in_sync,yet_to_be_edited:o[V].metadata.yet_to_be_edited})}),r}async ensureFolderExists(r){try{this.app.vault.getAbstractFileByPath(r)||await this.app.vault.createFolder(r)}catch(t){console.warn(`Failed to create folder: ${r}`,t)}}},Me=class extends y.PluginSettingTab{constructor(r,t){super(r,t);this.plugin=t}display(){let{containerEl:r}=this;r.empty(),r.createEl("h2",{text:"KOReader Sync Settings"}),new y.Setting(r).setName("KOReader Base Path").setDesc("Path where KOReader is mounted (e.g., /media/user/KOBOeReader)").addText(t=>t.setPlaceholder("Enter KOReader path").setValue(this.plugin.settings.koreaderBasePath).onChange(async i=>{this.plugin.settings.koreaderBasePath=i,await this.plugin.saveSettings()})),new y.Setting(r).setName("Highlights Folder").setDesc("Folder in your vault where highlights will be saved").addDropdown(t=>(this.getFolders().forEach(o=>{t.addOption(o,o)}),t.setValue(this.plugin.settings.obsidianNoteFolder).onChange(async o=>{this.plugin.settings.obsidianNoteFolder=o,await this.plugin.saveSettings()}))),r.createEl("h3",{text:"Sync Options"}),new y.Setting(r).setName("Sync Highlights").setDesc("Import highlights from KOReader").addToggle(t=>t.setValue(this.plugin.settings.syncHighlights).onChange(async i=>{this.plugin.settings.syncHighlights=i,await this.plugin.saveSettings()})),new y.Setting(r).setName("Sync Bookmarks").setDesc("Import bookmarks from KOReader").addToggle(t=>t.setValue(this.plugin.settings.syncBookmarks).onChange(async i=>{this.plugin.settings.syncBookmarks=i,await this.plugin.saveSettings()})),new y.Setting(r).setName("Keep in Sync").setDesc("Automatically update notes when highlights change in KOReader").addToggle(t=>t.setValue(this.plugin.settings.keepInSync).onChange(async i=>{this.plugin.settings.keepInSync=i,await this.plugin.saveSettings()})),new y.Setting(r).setName("Create Folder per Book").setDesc("Create a separate folder for each book").addToggle(t=>t.setValue(this.plugin.settings.aFolderForEachBook).onChange(async i=>{this.plugin.settings.aFolderForEachBook=i,await this.plugin.saveSettings()})),new y.Setting(r).setName("Create Book Index").setDesc("Create an index note for each book with all highlights").addToggle(t=>t.setValue(this.plugin.settings.createBookIndex).onChange(async i=>{this.plugin.settings.createBookIndex=i,await this.plugin.saveSettings()})),r.createEl("h3",{text:"Template Settings"}),new y.Setting(r).setName("Custom Template").setDesc("Use a custom template for highlight notes").addToggle(t=>t.setValue(this.plugin.settings.customTemplate).onChange(async i=>{this.plugin.settings.customTemplate=i,await this.plugin.saveSettings()})),this.plugin.settings.customTemplate&&new y.Setting(r).setName("Template File").setDesc("Path to your custom template file").addText(t=>t.setPlaceholder("templates/highlight.md").setValue(this.plugin.settings.templatePath||"").onChange(async i=>{this.plugin.settings.templatePath=i,await this.plugin.saveSettings()})),r.createEl("h3",{text:"Title Settings"}),this.addTitleSettings(r,"Note Titles",this.plugin.settings.noteTitleOptions,"noteTitleOptions"),this.addTitleSettings(r,"Book Titles",this.plugin.settings.bookTitleOptions,"bookTitleOptions"),r.createEl("h3",{text:"Danger Zone"}),new y.Setting(r).setName("Enable Reset Imported Notes").setDesc("Enable the command to reset the list of imported notes").addToggle(t=>t.setValue(this.plugin.settings.enableResetImportedNotes).onChange(async i=>{this.plugin.settings.enableResetImportedNotes=i,await this.plugin.saveSettings()}))}addTitleSettings(r,t,i,o){r.createEl("h4",{text:t}),new y.Setting(r).setName("Prefix").addText(s=>s.setPlaceholder("Enter prefix").setValue(i.prefix||"").onChange(async a=>{i.prefix=a,await this.plugin.saveSettings()})),new y.Setting(r).setName("Suffix").addText(s=>s.setPlaceholder("Enter suffix").setValue(i.suffix||"").onChange(async a=>{i.suffix=a,await this.plugin.saveSettings()})),new y.Setting(r).setName("Max Words").setDesc("Maximum number of words in title").addSlider(s=>s.setLimits(1,20,1).setValue(i.maxWords||5).setDynamicTooltip().onChange(async a=>{i.maxWords=a,await this.plugin.saveSettings()})),new y.Setting(r).setName("Max Length").setDesc("Maximum number of characters in title").addSlider(s=>s.setLimits(10,100,5).setValue(i.maxLength||25).setDynamicTooltip().onChange(async a=>{i.maxLength=a,await this.plugin.saveSettings()}))}getFolders(){let r=[],t=this.app.vault.adapter.files;for(let[i,o]of Object.entries(t))o.type==="folder"&&r.push(i);return r.sort()}};
/*! Bundled license information:

is-extendable/index.js:
  (*!
   * is-extendable <https://github.com/jonschlinkert/is-extendable>
   *
   * Copyright (c) 2015, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

strip-bom-string/index.js:
  (*!
   * strip-bom-string <https://github.com/jonschlinkert/strip-bom-string>
   *
   * Copyright (c) 2015, 2017, Jon Schlinkert.
   * Released under the MIT License.
   *)
*/
